import { __decorate, __extends } from "tslib";
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { BaseService } from './base.service';
import { GlobalService } from './global.service';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common/http";
import * as i2 from "./global.service";
var UciService = /** @class */ (function (_super) {
    __extends(UciService, _super);
    function UciService(http, globalService) {
        var _this = _super.call(this, http, globalService) || this;
        _this.http = http;
        _this.globalService = globalService;
        _this.FORM_BASE_URL = 'https://dev.sunbirded.org/';
        _this.globalService.baseUrl$.subscribe(function (value) {
            if (value) {
                _this.BASE_URL = value + '/admin/';
                _this.BASE_URL_V1 = value + '/admin/v1/';
                _this.BASE_URL_V2 = value + '/admin/v2/';
                _this.DATASET_URL = value.replace('/uci') + '/dataset/v1/';
            }
        });
        _this.globalService.nlBaseUrl$.subscribe(function (value) {
            if (value) {
                _this.NL_BASE_URL = value + '/';
            }
        });
        return _this;
    }
    UciService.prototype.fetchConversation = function (params) {
        return this.getRequest(this.BASE_URL + 'bot/search', params, { asset: 'bot' });
    };
    UciService.prototype.searchConversation = function (params) {
        return this.getRequest(this.BASE_URL + 'bot/search', params, { asset: 'bot' });
    };
    UciService.prototype.pauseConversation = function (botId) {
        return this.getRequest(this.BASE_URL + ("bot/pause/" + botId), {}, { asset: 'bot' });
    };
    UciService.prototype.startConversation = function (botId) {
        return this.getRequest(this.BASE_URL + ("bot/start/" + botId), {}, { asset: 'bot' });
    };
    UciService.prototype.deleteConversation = function (botId) {
        return this.getRequest(this.BASE_URL + ("bot/delete/" + botId), {}, { asset: 'bot' });
    };
    UciService.prototype.getBotDetails = function (id) {
        return this.getRequest(this.BASE_URL + ("bot/get/" + id), {}, { asset: 'bot' });
    };
    UciService.prototype.getCheckStartingMessage = function (param) {
        return this.getRequest(this.BASE_URL + "bot/getByParam", param, { asset: 'bot' });
    };
    UciService.prototype.botCreate = function (data) {
        return this.postRequest(this.BASE_URL + 'bot', data, { asset: 'bot' });
    };
    UciService.prototype.botUpdate = function (id, data) {
        return this.postRequest(this.BASE_URL + ("bot/update/" + id), data, { asset: 'bot' });
    };
    // User Segment APIs
    UciService.prototype.fetchUserSegment = function (params) {
        return this.getRequest(this.BASE_URL + 'userSegment/get', params, { asset: 'userSegment' });
    };
    UciService.prototype.searchUserSegment = function (params) {
        return this.getRequest(this.BASE_URL + 'userSegment/search', params, { asset: 'userSegment' });
    };
    UciService.prototype.createUserSegment = function (data) {
        return this.postSegmentRequest(this.BASE_URL + 'user-segment', data, { asset: 'userSegment' });
    };
    UciService.prototype.userSegmentQueryBuilder = function (data) {
        return this.postRequest(this.BASE_URL + 'userSegment/queryBuilder', data, { asset: 'userSegment' });
    };
    // Conversation APIs
    UciService.prototype.createLogic = function (data) {
        return this.postRequest(this.BASE_URL + 'conversationLogic', data, { asset: 'conversationLogic' });
    };
    UciService.prototype.updateLogic = function (id, data) {
        return this.patchRequest(this.BASE_URL + ("conversationLogic/" + id), data, { asset: 'conversationLogic' });
    };
    UciService.prototype.deleteLogic = function (id) {
        return this.deleteRequest(this.BASE_URL + ("conversationLogic/" + id), { asset: 'conversationLogic' });
    };
    // Mis APIs
    UciService.prototype.uploadFile = function (obj) {
        return this.postRequest(this.BASE_URL + 'form/upload', this.toFormData(obj));
    };
    UciService.prototype.readForm = function (data) {
        return this.postRequest(this.FORM_BASE_URL + 'api/data/v1/form/read', data);
    };
    // Exhaust API
    UciService.prototype.getJobList = function (id, params) {
        return this.getRequest(this.DATASET_URL + ("request/list/" + id), params, { asset: 'conversationLogic' });
    };
    UciService.prototype.getJobInfo = function (id, params) {
        return this.getRequest(this.DATASET_URL + ("request/read/" + id), params, { asset: 'conversationLogic' });
    };
    UciService.prototype.submitExhaust = function (data) {
        return this.postRequest(this.DATASET_URL + "request/submit", data, { asset: 'conversationLogic' });
    };
    UciService.prototype.nlSegmentBotMapping = function (data) {
        return this.postRequest(this.NL_BASE_URL + "segment-bot-mapping", data);
    };
    UciService.prototype.submitSegmentData = function (data) {
        return this.postRequest(this.NL_BASE_URL + "segment-bot-mapping", data);
    };
    UciService.ctorParameters = function () { return [
        { type: HttpClient },
        { type: GlobalService }
    ]; };
    UciService.ɵprov = i0.ɵɵdefineInjectable({ factory: function UciService_Factory() { return new UciService(i0.ɵɵinject(i1.HttpClient), i0.ɵɵinject(i2.GlobalService)); }, token: UciService, providedIn: "root" });
    UciService = __decorate([
        Injectable({
            providedIn: 'root'
        })
    ], UciService);
    return UciService;
}(BaseService));
export { UciService };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWNpLnNlcnZpY2UuanMiLCJzb3VyY2VSb290Ijoibmc6Ly9Ac2FtYWdyYS14L3VjaS1jb25zb2xlLyIsInNvdXJjZXMiOlsibGliL3NlcnZpY2VzL3VjaS5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxPQUFPLEVBQUMsVUFBVSxFQUFDLE1BQU0sZUFBZSxDQUFDO0FBQ3pDLE9BQU8sRUFBQyxVQUFVLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQUNoRCxPQUFPLEVBQUMsV0FBVyxFQUFDLE1BQU0sZ0JBQWdCLENBQUM7QUFFM0MsT0FBTyxFQUFDLGFBQWEsRUFBQyxNQUFNLGtCQUFrQixDQUFDOzs7O0FBSy9DO0lBQWdDLDhCQUFXO0lBU3ZDLG9CQUFtQixJQUFnQixFQUFTLGFBQTRCO1FBQXhFLFlBQ0ksa0JBQU0sSUFBSSxFQUFFLGFBQWEsQ0FBQyxTQWU3QjtRQWhCa0IsVUFBSSxHQUFKLElBQUksQ0FBWTtRQUFTLG1CQUFhLEdBQWIsYUFBYSxDQUFlO1FBRnhFLG1CQUFhLEdBQUcsNEJBQTRCLENBQUM7UUFJekMsS0FBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsU0FBUyxDQUFDLFVBQUEsS0FBSztZQUN2QyxJQUFJLEtBQUssRUFBRTtnQkFDUCxLQUFJLENBQUMsUUFBUSxHQUFHLEtBQUssR0FBRyxTQUFTLENBQUM7Z0JBQ2xDLEtBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSyxHQUFHLFlBQVksQ0FBQztnQkFDeEMsS0FBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLEdBQUcsWUFBWSxDQUFDO2dCQUV4QyxLQUFJLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUcsY0FBYyxDQUFDO2FBQzdEO1FBQ0wsQ0FBQyxDQUFDLENBQUM7UUFDSCxLQUFJLENBQUMsYUFBYSxDQUFDLFVBQVUsQ0FBQyxTQUFTLENBQUMsVUFBQSxLQUFLO1lBQ3pDLElBQUksS0FBSyxFQUFFO2dCQUNQLEtBQUksQ0FBQyxX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QkFuSUQ7Q0FtSUMsQUExSEQsQ0FBZ0MsV0FBVyxHQTBIMUM7U0ExSFksVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SW5qZWN0YWJsZX0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQge0h0dHBDbGllbnR9IGZyb20gJ0Bhbmd1bGFyL2NvbW1vbi9odHRwJztcbmltcG9ydCB7QmFzZVNlcnZpY2V9IGZyb20gJy4vYmFzZS5zZXJ2aWNlJztcbmltcG9ydCB7T2JzZXJ2YWJsZX0gZnJvbSAncnhqcyc7XG5pbXBvcnQge0dsb2JhbFNlcnZpY2V9IGZyb20gJy4vZ2xvYmFsLnNlcnZpY2UnO1xuXG5ASW5qZWN0YWJsZSh7XG4gICAgcHJvdmlkZWRJbjogJ3Jvb3QnXG59KVxuZXhwb3J0IGNsYXNzIFVjaVNlcnZpY2UgZXh0ZW5kcyBCYXNlU2VydmljZSB7XG4gICAgQkFTRV9VUkw7XG4gICAgQkFTRV9VUkxfVjE7XG4gICAgQkFTRV9VUkxfVjI7XG5cbiAgICBOTF9CQVNFX1VSTDtcbiAgICBEQVRBU0VUX1VSTDtcbiAgICBGT1JNX0JBU0VfVVJMID0gJ2h0dHBzOi8vZGV2LnN1bmJpcmRlZC5vcmcvJztcblxuICAgIGNvbnN0cnVjdG9yKHB1YmxpYyBodHRwOiBIdHRwQ2xpZW50LCBwdWJsaWMgZ2xvYmFsU2VydmljZTogR2xvYmFsU2VydmljZSkge1xuICAgICAgICBzdXBlcihodHRwLCBnbG9iYWxTZXJ2aWNlKTtcbiAgICAgICAgdGhpcy5nbG9iYWxTZXJ2aWNlLmJhc2VVcmwkLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLkJBU0VfVVJMID0gdmFsdWUgKyAnL2FkbWluLyc7XG4gICAgICAgICAgICAgICAgdGhpcy5CQVNFX1VSTF9WMSA9IHZhbHVlICsgJy9hZG1pbi92MS8nO1xuICAgICAgICAgICAgICAgIHRoaXMuQkFTRV9VUkxfVjIgPSB2YWx1ZSArICcvYWRtaW4vdjIvJztcblxuICAgICAgICAgICAgICAgIHRoaXMuREFUQVNFVF9VUkwgPSB2YWx1ZS5yZXBsYWNlKCcvdWNpJykgKyAnL2RhdGFzZXQvdjEvJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuZ2xvYmFsU2VydmljZS5ubEJhc2VVcmwkLnN1YnNjcmliZSh2YWx1ZSA9PiB7XG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgICAgICAgICB0aGlzLk5MX0JBU0VfVVJMID0gdmFsdWUgKyAnLyc7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGZldGNoQ29udmVyc2F0aW9uKHBhcmFtcyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICdib3Qvc2VhcmNoJywgcGFyYW1zLCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgc2VhcmNoQ29udmVyc2F0aW9uKHBhcmFtcyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICdib3Qvc2VhcmNoJywgcGFyYW1zLCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgcGF1c2VDb252ZXJzYXRpb24oYm90SWQpOiBPYnNlcnZhYmxlPGFueT4ge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L3BhdXNlLyR7Ym90SWR9YCwge30sIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICBzdGFydENvbnZlcnNhdGlvbihib3RJZCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArIGBib3Qvc3RhcnQvJHtib3RJZH1gLCB7fSwge2Fzc2V0OiAnYm90J30pO1xuICAgIH1cblxuICAgIGRlbGV0ZUNvbnZlcnNhdGlvbihib3RJZCk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArIGBib3QvZGVsZXRlLyR7Ym90SWR9YCwge30sIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICBnZXRCb3REZXRhaWxzKGlkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArIGBib3QvZ2V0LyR7aWR9YCwge30sIHthc3NldDogJ2JvdCd9KTtcbiAgICB9XG5cbiAgICBnZXRDaGVja1N0YXJ0aW5nTWVzc2FnZShwYXJhbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgYm90L2dldEJ5UGFyYW1gLCBwYXJhbSwge2Fzc2V0OiAnYm90J30pO1xuICAgIH1cblxuICAgIGJvdENyZWF0ZShkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyAnYm90JywgZGF0YSwge2Fzc2V0OiAnYm90J30pO1xuICAgIH1cblxuICAgIGJvdFVwZGF0ZShpZCwgZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgYGJvdC91cGRhdGUvJHtpZH1gLCBkYXRhLCB7YXNzZXQ6ICdib3QnfSk7XG4gICAgfVxuXG4gICAgLy8gVXNlciBTZWdtZW50IEFQSXNcbiAgICBmZXRjaFVzZXJTZWdtZW50KHBhcmFtcyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICd1c2VyU2VnbWVudC9nZXQnLCBwYXJhbXMsIHthc3NldDogJ3VzZXJTZWdtZW50J30pO1xuICAgIH1cblxuICAgIHNlYXJjaFVzZXJTZWdtZW50KHBhcmFtcyk6IE9ic2VydmFibGU8YW55PiB7XG4gICAgICAgIHJldHVybiB0aGlzLmdldFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICd1c2VyU2VnbWVudC9zZWFyY2gnLCBwYXJhbXMsIHthc3NldDogJ3VzZXJTZWdtZW50J30pO1xuICAgIH1cblxuICAgIGNyZWF0ZVVzZXJTZWdtZW50KGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFNlZ21lbnRSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyAndXNlci1zZWdtZW50JywgZGF0YSwge2Fzc2V0OiAndXNlclNlZ21lbnQnfSk7XG4gICAgfVxuXG4gICAgdXNlclNlZ21lbnRRdWVyeUJ1aWxkZXIoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ3VzZXJTZWdtZW50L3F1ZXJ5QnVpbGRlcicsIGRhdGEsIHthc3NldDogJ3VzZXJTZWdtZW50J30pO1xuICAgIH1cblxuICAgIC8vIENvbnZlcnNhdGlvbiBBUElzXG4gICAgY3JlYXRlTG9naWMoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLkJBU0VfVVJMICsgJ2NvbnZlcnNhdGlvbkxvZ2ljJywgZGF0YSwge2Fzc2V0OiAnY29udmVyc2F0aW9uTG9naWMnfSk7XG4gICAgfVxuXG4gICAgdXBkYXRlTG9naWMoaWQsIGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucGF0Y2hSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgY29udmVyc2F0aW9uTG9naWMvJHtpZH1gLCBkYXRhLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICBkZWxldGVMb2dpYyhpZCkge1xuICAgICAgICByZXR1cm4gdGhpcy5kZWxldGVSZXF1ZXN0KHRoaXMuQkFTRV9VUkwgKyBgY29udmVyc2F0aW9uTG9naWMvJHtpZH1gLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICAvLyBNaXMgQVBJc1xuICAgIHVwbG9hZEZpbGUob2JqKTogT2JzZXJ2YWJsZTxhbnk+IHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5CQVNFX1VSTCArICdmb3JtL3VwbG9hZCcsIHRoaXMudG9Gb3JtRGF0YShvYmopKTtcbiAgICB9XG5cbiAgICByZWFkRm9ybShkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RSZXF1ZXN0KHRoaXMuRk9STV9CQVNFX1VSTCArICdhcGkvZGF0YS92MS9mb3JtL3JlYWQnLCBkYXRhKTtcbiAgICB9XG5cbiAgICAvLyBFeGhhdXN0IEFQSVxuICAgIGdldEpvYkxpc3QoaWQsIHBhcmFtcykge1xuICAgICAgICByZXR1cm4gdGhpcy5nZXRSZXF1ZXN0KHRoaXMuREFUQVNFVF9VUkwgKyBgcmVxdWVzdC9saXN0LyR7aWR9YCwgcGFyYW1zLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICBnZXRKb2JJbmZvKGlkLCBwYXJhbXMpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0UmVxdWVzdCh0aGlzLkRBVEFTRVRfVVJMICsgYHJlcXVlc3QvcmVhZC8ke2lkfWAsIHBhcmFtcywge2Fzc2V0OiAnY29udmVyc2F0aW9uTG9naWMnfSk7XG4gICAgfVxuXG4gICAgc3VibWl0RXhoYXVzdChkYXRhKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnBvc3RSZXF1ZXN0KHRoaXMuREFUQVNFVF9VUkwgKyBgcmVxdWVzdC9zdWJtaXRgLCBkYXRhLCB7YXNzZXQ6ICdjb252ZXJzYXRpb25Mb2dpYyd9KTtcbiAgICB9XG5cbiAgICBubFNlZ21lbnRCb3RNYXBwaW5nKGRhdGEpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucG9zdFJlcXVlc3QodGhpcy5OTF9CQVNFX1VSTCArIGBzZWdtZW50LWJvdC1tYXBwaW5nYCwgZGF0YSk7XG4gICAgfVxuXG4gICAgc3VibWl0U2VnbWVudERhdGEoZGF0YSkge1xuICAgICAgICByZXR1cm4gdGhpcy5wb3N0UmVxdWVzdCh0aGlzLk5MX0JBU0VfVVJMICsgYHNlZ21lbnQtYm90LW1hcHBpbmdgLCBkYXRhKTtcbiAgICB9XG59XG4iXX0=